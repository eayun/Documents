# 仅运行一次虚拟机的解释

**只运行一次**定义了一些仅仅在这次运行的配置。对于永久性的启动参数，在**新建虚拟机**窗口中的**引导选项**中配置。下表详细解释了**只运行一次**窗口所需的信息。


**虚拟机：只运行一次设置**

|属性|详细描述|
|----|--------|
|**引导选项**|该选项可以让用户设置虚拟机的启动顺序，启动参数，安装操作系统需要的镜像和额外的驱动等。<br/> - **附加软盘** - 给虚拟机附加一个软盘镜像，一般在安装 Windows 系统的时候使用。该软盘镜像必须在 ISO 存储域里。<br/><br/> - **附加 CD** - 给虚拟机附加一个 ISO 镜像，用来给虚拟机安装操作系统时候使用。该 CD 镜像必须在 ISO 存储域里。<br/><br/> - **引导序列** - 定义虚拟机从哪个设备找到启动镜像。<br/><br/> - **以 Stateless 状态运行** - 虚拟机关闭之后，对磁盘做的任何修改将会被还原。<br/><br/> - **以暂停模式启动** - 虚拟机最开始处于暂停状态。对于需要准备很长时间才能建立 spice 连接的场景来说，暂停模式很有用。例如，如果 spice client 和虚拟机运行的网络很远，网络很慢的时候。<br/><br/>|
|**Linux 引导选项**|设置了下列参数之后，虚拟机直接启动一个 Linux 内核，而不是从 BIOS 加载启动镜像。<br/><br/> - **内核路径** - 合法的内核镜像的路径。内核镜像必须存储在 ISO 域里(使用 iso://path-to-image 的格式)，或者存储在主机的存储域里（使用/data/images）<br/><br/> - **initrd 路径** - 合法的 ramdisk 镜像的路径。内核镜像必须存储在 ISO 域里（使用 iso://path-to-image 的格式），或者存储在主机的存储域里（使用/data/images）<br/><br/> - **内核参数** - 内核启动时的参数<br/><br/>|
|**初始运行**|允许用户使用 cloud-init，并且定义这个虚拟机将使用到的一些设置。对于 Linux 的虚拟机来说，你必须选择**初始运行**选项卡内的 **使用 Cloud-Init** 勾选框来查看可用的设置。对于 Windows 的虚拟机来说，你必须要在**引导选项**选项卡内通过选择**附加软盘**勾选框来附加 **[sysprep]** 软盘到虚拟机。特定的设置只有在特定的操作系统上才有，如下：<br/><br/>     - **虚拟机主机名** - 允许用户指定主机名。<br/><br/> - **域** - 虚拟机所属于的活动目录域。（Windows）<br/><br/> - **机构名称** - 虚拟机所属的机构名称。该值对应 Windows 初次启动时所显示的机构名。（Windows）<br/><br/> - **活动目录 OU** - 虚拟机所属于的活动目录域的组织单元。<br/><br/> - **配置时区** - 虚拟机的时区设置，勾选该设置并在下方的**时区**列表里选择时区。<br/><br/>**Admin 密码**<br/><br/>虚拟机的管理员性质的用户密码。点击箭头图标显示该选项的设置。（Windows）<br/><br/> - **使用已经配置的密码** - 该设置在你已经设置了 Admin 密码的时候自动选择了。你必须去勾选该设置来启用 **Admin 密码** 和**验证 Admin 密码**设置，并且更新密码。<br/><br/> - **Admin 密码** - 虚拟机的管理员性质的用户密码。在该处填写密码并且在**验证 Admin 密码**来确认密码改动。<br/><br/>**验证**<br/><br/>虚拟机的认证的具体设置。点击箭头图标显示该选项的设置。（Linux）<br/><br/> - **使用已经配置的密码** - 该设置在你已经设置了 root 密码的时候自动选择了。你必须去勾选该设置来启用 **Root 密码** 和**验证 Root 密码**设置，并且更新密码。<br/><br/> - **Root 密码** - 虚拟机的管理员性质的用户密码。在该处填写密码并且在**验证 Root 密码**来确认密码改动。<br/><br/> - **SSH 授权密钥** - 添加至虚拟机的授权过的密钥表中的密钥。<br/><br/> - **重新生成 SSH 密钥** - 重新生成虚拟机的密钥。<br/><br/>**自定义语言环境**<br/><br/>虚拟机的自定义语言环境。自定义语言环境必须遵守书写格式比如 **en-US**。点击箭头图标显示该选项的设置。（Windows）<br/><br/> - **输入语言环境** - 用于用户输入的语言设置。<br/><br/> - **UI 语言** - 用于界面元素显示的uyyan设置，比如按钮和列表。<br/><br/> - **系统语言环境** - 总的系统的语言环境。<br/><br/> - **用户语言环境** - 用户的语言环境。<br/><br/>**网络**<br/><br/>虚拟机的与网络有关的设置。点击箭头图标显示该选项的设置。（Linux）<br/><br/> - **DNS 服务器** - 虚拟机要使用的 DNS 服务器地址。<br/><br/> - **DNS 搜索域** - 虚拟机要使用的 DNS 搜索域。<br/><br/> - **网络** - 配置虚拟机的网络接口。勾选该设置并且使用 **+** 或者 **-** 来新增或者删除虚拟网络接口。当点击 **+** 时，一组界面元素将会出现，可以用来配置时候使用 DHCP，是否设置 IP 地址，子网掩码和网关，并且虚拟机网卡是否在虚拟机启动的时候启动。<br/><br/>**自定义脚本**<br/><br/> - 虚拟机启动时将要运行的脚本。填入该设置的自定义脚本为自定义 YAML 部分，这些 YAML 部分是虚拟化管理平台创建并添加的部分，它可以让你自动化一些任务比如创建文件和用户，配置 **yum** 仓库源还有运行命令。想要知道更多如何配置该设置，参见[自定义脚本](http://www.ovirt.org/Features/vm-init-persistent#Custom_Script)的文档。（linux）<br/><br/>**Sysprep**<br/><br/> - 一个自定义的 Sysprep 定义。该定义必须完全遵守无人值守安装应答文件的格式。你可以在虚拟化管理平台上的如下位置 **/usr/share/ovirt-engine/conf/sysprep/** 复制粘帖默认的应答文件，然后根据需要修改内容。（Windows）
|**主机**|指定虚拟机运行的主机：<br/><br/> - **群集里的任何主机** - 虚拟机可以运行在群集的任何主机上。<br/><br/> - **专有的** - 用户指定一个主机来运行该虚拟机。<br/><br/>|
|**显示协议**|设置连接虚拟机的显示协议:<br/> - **VNC** - 可以被 Linux 虚拟机使用。需要一个 VNC 客户端来连接。可以选择性地在下拉列表中选择一个 **VNC 键盘格式**。<br/><br/> - **SPICE** - 推荐使用的显示协议，注意：Windows 8 和 Server 2012 不能使用此协议。<br/><br/>|
|**自定义属性**|可以传递给 VDSM 的额外属性。<br/><br/> - **sap_agent** - 设置 SAP 监控。设置 **true** 或者 **false**。<br/><br/> - **sndbuf** - 设置虚拟机套接字的发送缓存大小，默认值是 0。<br/><br/> - **vhost** - 填写虚拟机所需要运行在的 vhost 的名称，名称可以包含任何的字母和数字组合。<br/><br/> - **viodiskcache** - 设置 virtio 磁盘的缓存模式。**writethrough** 同时把数据写到缓存和磁盘中才返回，性能较低。**writeback** 将数据写入到缓存中就返回，性能较高，但是不能保证数据安全。**none** 不使用缓存。<br/><br/>|

